# FruitYOLO2.0 é¡¹ç›®éªŒè¯æŠ¥å‘Š

**éªŒè¯æ—¥æœŸ**: 2026å¹´2æœˆ8æ—¥  
**éªŒè¯ç›®çš„**: ç¡®è®¤æ¸…ç†åçš„é¡¹ç›®é…ç½®å’Œæ•°æ®é›†å®Œæ•´æ€§ï¼ŒéªŒè¯è®­ç»ƒåŠŸèƒ½æ­£å¸¸

---

## âœ… éªŒè¯ç»“æœï¼šå…¨éƒ¨é€šè¿‡

### 1. ç¯å¢ƒé…ç½®éªŒè¯

| ç»„ä»¶ | çŠ¶æ€ | ç‰ˆæœ¬/ä¿¡æ¯ |
|------|------|-----------|
| **Python ç¯å¢ƒ** | âœ“ æ­£å¸¸ | Python 3.9.23 (Conda pytorch) |
| **Ultralytics** | âœ“ æ­£å¸¸ | 8.3.222 |
| **PyTorch** | âœ“ æ­£å¸¸ | 2.6.0+cu126 |
| **CUDA** | âœ“ å¯ç”¨ | NVIDIA GeForce RTX 4060 Laptop GPU (8188MB) |

### 2. æ•°æ®é›†å®Œæ•´æ€§éªŒè¯

#### Dataset_Original/ (ä¸»æ•°æ®é›†)
- âœ… **è®­ç»ƒé›†**: 3,436 å¼ å›¾åƒ + 3,436 ä¸ªæ ‡ç­¾æ–‡ä»¶
- âœ… **éªŒè¯é›†**: 251 å¼ å›¾åƒ + 251 ä¸ªæ ‡ç­¾æ–‡ä»¶
- âœ… **æµ‹è¯•é›†**: 251 å¼ å›¾åƒ + 251 ä¸ªæ ‡ç­¾æ–‡ä»¶
- âœ… **é…ç½®æ–‡ä»¶**: data.yaml (å·²ä¿®å¤ç¼–ç é—®é¢˜)
- âœ… **ç±»åˆ«å®šä¹‰**: 16 ä¸ªç±»åˆ«å®Œæ•´

#### ç±»åˆ«åˆ—è¡¨ (16ç±»)
```
Apple_healthy, Apple_rotten
Banana_healthy, Banana_rotten
Beans_healthy, Beans_rotten
Grape_healthy, Grape_rotten
Mango_healthy, Mango_rotten
Orange_healthy, Orange_rotten
Potato_healthy, Potato_rotten
Tomato_healthy, Tomato_rotten
```

#### å…¶ä»–æ•°æ®é›†
- âœ… **Dataset_resplit/**: é‡æ–°åˆ†å‰²ç‰ˆæœ¬ï¼Œå®Œæ•´ä¿ç•™
- âœ… **Dataset_resplit_aug/**: æ•°æ®å¢å¼ºç‰ˆæœ¬ï¼Œå®Œæ•´ä¿ç•™
- âœ… **fresh-and-rotten-fruits-3/**: å¤–éƒ¨æ•°æ®é›†ï¼Œå®Œæ•´ä¿ç•™

### 3. æ¨¡å‹æ–‡ä»¶éªŒè¯

| æ¨¡å‹æ–‡ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| yolov8n.pt | âœ“ å­˜åœ¨ | YOLOv8 Nano é¢„è®­ç»ƒæƒé‡ |
| yolov8s.pt | âœ“ å­˜åœ¨ | YOLOv8 Small é¢„è®­ç»ƒæƒé‡ (è®­ç»ƒè„šæœ¬é»˜è®¤) |
| yolo11n.pt | âœ“ å­˜åœ¨ | YOLO11 Nano é¢„è®­ç»ƒæƒé‡ |

### 4. è®­ç»ƒåŠŸèƒ½éªŒè¯

#### æµ‹è¯•å‚æ•°
- **æ¨¡å‹**: yolov8n.pt
- **æ•°æ®é›†**: Dataset_Original/data.yaml
- **è®­ç»ƒè½®æ¬¡**: 1 epoch (éªŒè¯æµ‹è¯•)
- **å›¾åƒå¤§å°**: 640
- **æ‰¹æ¬¡å¤§å°**: 4
- **è®¾å¤‡**: GPU 0 (CUDA)

#### è®­ç»ƒç»“æœ
```
âœ“ æ•°æ®åŠ è½½æˆåŠŸ
  - è®­ç»ƒé›†æ‰«æ: 3,436 images, 0 corrupt
  - éªŒè¯é›†æ‰«æ: 251 images, 0 corrupt

âœ“ æ¨¡å‹åˆå§‹åŒ–æˆåŠŸ
  - å‚æ•°é‡: 3,013,968
  - ä»é¢„è®­ç»ƒæƒé‡è¿ç§»: 319/355 é¡¹

âœ“ è®­ç»ƒæ‰§è¡ŒæˆåŠŸ
  - GPU å†…å­˜ä½¿ç”¨: ~0.566G
  - è®­ç»ƒé€Ÿåº¦: 16.9 it/s
  - è®­ç»ƒæ—¶é—´: 50.7s

âœ“ éªŒè¯æŒ‡æ ‡ä¼˜ç§€
  - Precision: 0.916
  - Recall: 0.907
  - mAP@50: 0.965
  - mAP@50-95: 0.881
```

### 5. å·¥å…·è„šæœ¬éªŒè¯

ä¿ç•™çš„æ ¸å¿ƒå·¥å…· (tools/ ç›®å½•):
- âœ… `check_label_image_match.py` - æ ‡ç­¾å›¾åƒåŒ¹é…æ£€æŸ¥
- âœ… `check_label_indices.py` - æ ‡ç­¾ç´¢å¼•éªŒè¯
- âœ… `clean_empty_labels.py` - ç©ºæ ‡ç­¾æ¸…ç†
- âœ… `fix_augmented_labels.py` - å¢å¼ºæ ‡ç­¾ä¿®å¤
- âœ… `resplit_dataset.py` - æ•°æ®é›†é‡åˆ†å‰²
- âœ… `remap_external_labels.py` - å¤–éƒ¨æ ‡ç­¾é‡æ˜ å°„
- âœ… `rewrite_external_labels.py` - å¤–éƒ¨æ ‡ç­¾é‡å†™
- âœ… `generate_augmented.py` - æ•°æ®å¢å¼ºç”Ÿæˆ
- âœ… `train_plateau_controller.py` - è®­ç»ƒæ§åˆ¶å™¨
- âœ… æ˜ å°„é…ç½®æ–‡ä»¶: `external_name_to_target.json`, `external_to_target_mapping.json`

### 6. è®­ç»ƒç»“æœç›®å½•

ä¿ç•™çš„æœ‰ä»·å€¼è®­ç»ƒç»“æœ (runs/detect/):
- `resplit_train/` - é‡åˆ†å‰²æ•°æ®é›†è®­ç»ƒ
- `resplit_train_aug/` - å¢å¼ºæ•°æ®é›†è®­ç»ƒ
- `resplit_train_plateau/` - å¹³å°æœŸæ§åˆ¶è®­ç»ƒ
- `resplit_train_gpu_patience3/` - GPU patience=3 è®­ç»ƒ
- `resplit_train_restarted/` - é‡å¯è®­ç»ƒ
- `resplit_train_yolo_patience3/` - YOLO patience=3 è®­ç»ƒ

ä¿ç•™çš„è®­ç»ƒç›®å½• (runs/train/):
- `test_with_external/` - å¤–éƒ¨æ•°æ®é›†è®­ç»ƒç»“æœ

---

## ğŸ—‘ï¸ å·²æ¸…ç†çš„å†…å®¹

### åˆ é™¤çš„æµ‹è¯•å’Œè°ƒè¯•æ–‡ä»¶
- âŒ æ‰€æœ‰æµ‹è¯•è¯„ä¼°ç›®å½• (external_test_eval, predict, valç­‰)
- âŒ æ‰‹åŠ¨æ£€æŸ¥å’Œå¯è§†åŒ–ç›®å½•
- âŒ è¯Šæ–­å’Œå®¡è®¡è„šæœ¬ (~15ä¸ª)
- âŒ æµ‹è¯•å’ŒéªŒè¯å·¥å…·è„šæœ¬ (~10ä¸ª)
- âŒ æ—¥å¿—æ–‡ä»¶å’ŒCSVæŠ¥å‘Š
- âŒ å‹ç¼©åŒ…æ–‡ä»¶

### åˆ é™¤çš„å†—ä½™æ•°æ®
- âŒ Dataset_Original/backup/ (å¤‡ä»½ç›®å½•)
- âŒ Dataset_Original/images/test_aligned/ (æµ‹è¯•å¯¹é½æ•°æ®)
- âŒ fresh-and-rotten-fruits-3/test_rewritten/ (é‡å†™æµ‹è¯•æ•°æ®)
- âŒ å¤–éƒ¨æ•°æ®é›†é¢å¤–é…ç½®æ–‡ä»¶
- âŒ ç¼“å­˜æ–‡ä»¶ (labels.cache.npy)
- âŒ COCOæ³¨é‡Šç›®å½•

---

## ğŸ“ ä¿®å¤çš„é—®é¢˜

1. **é…ç½®æ–‡ä»¶ç¼–ç é—®é¢˜**
   - é—®é¢˜: Dataset_Original/data.yaml å­˜åœ¨ç¼–ç é”™è¯¯
   - è§£å†³: é‡å†™ä¸ºæ ‡å‡†UTF-8ç¼–ç 
   - çŠ¶æ€: âœ… å·²ä¿®å¤å¹¶éªŒè¯

---

## ğŸ¯ ç»“è®º

**é¡¹ç›®çŠ¶æ€**: âœ… å®Œå…¨æ­£å¸¸  

æ¸…ç†åçš„ FruitYOLO2.0 é¡¹ç›®ï¼š
1. âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ä¿ç•™
2. âœ… è®­ç»ƒæ•°æ®å®Œæ•´æ— æŸ (3,687 å¼ å›¾åƒ)
3. âœ… è®­ç»ƒè„šæœ¬æ­£å¸¸å·¥ä½œ
4. âœ… GPU åŠ é€Ÿæ­£å¸¸
5. âœ… æ•°æ®é›†é…ç½®æ­£ç¡®
6. âœ… æ ¸å¿ƒå·¥å…·è„šæœ¬ä¿ç•™
7. âœ… æœ‰ä»·å€¼çš„è®­ç»ƒç»“æœä¿ç•™

**å¯ä»¥å¼€å§‹æ­£å¼è®­ç»ƒ**ï¼Œé¡¹ç›®é…ç½®ä¸åŸå§‹é¡¹ç›®å®Œå…¨ä¸€è‡´ï¼

---

## ğŸš€ åç»­ä½¿ç”¨å»ºè®®

### å¼€å§‹è®­ç»ƒ
```powershell
# ä½¿ç”¨é»˜è®¤é…ç½®è®­ç»ƒ
.\run_yolov8_train.ps1

# æˆ–ç›´æ¥ä½¿ç”¨ yolo å‘½ä»¤
yolo train model=yolov8s.pt data=Dataset_Original/data.yaml epochs=200 imgsz=640 batch=16 device=0
```

### ä½¿ç”¨ä¸åŒæ•°æ®é›†
```powershell
# ä½¿ç”¨é‡åˆ†å‰²æ•°æ®é›†
yolo train model=yolov8s.pt data=Dataset_resplit/data.yaml epochs=200 batch=16 device=0

# ä½¿ç”¨å¢å¼ºæ•°æ®é›†
yolo train model=yolov8s.pt data=Dataset_resplit_aug/data.yaml epochs=200 batch=16 device=0
```

### ç›‘æ§è®­ç»ƒ
è®­ç»ƒç»“æœä¼šä¿å­˜åœ¨ `runs/train/` ç›®å½•ä¸‹ï¼ŒåŒ…å«ï¼š
- è®­ç»ƒæ›²çº¿å›¾
- éªŒè¯æŒ‡æ ‡
- æœ€ä½³æ¨¡å‹æƒé‡ (best.pt)
- æœ€åæ¨¡å‹æƒé‡ (last.pt)

---

**éªŒè¯äººå‘˜**: GitHub Copilot  
**éªŒè¯å®Œæˆæ—¶é—´**: 2026å¹´2æœˆ8æ—¥
